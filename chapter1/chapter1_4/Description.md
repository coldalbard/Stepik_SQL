# Содержание урока
SQL позволяет создавать вложенные запросы. Вложенный запрос (подзапрос, внутренний запрос) – это запрос внутри другого запроса SQL.

Вложенный запрос используется для выборки данных, которые будут использоваться в условии отбора записей основного запроса. Его применяют для:

сравнения выражения с результатом вложенного запроса;

определения того, включено ли выражение в результаты вложенного запроса;

проверки того, выбирает ли запрос определенные строки.

#

Вложенный запрос имеет следующие компоненты:


ключевое слово SELECT  после которого указываются имена столбцов или выражения (чаще всего список содержит один элемент) ;

ключевое слово FROM и имя таблицы, из которой выбираются данные;

необязательное предложение WHERE;

необязательное предложение GROUP BY:

необязательное предложение HAVING.

Вложенные запросы  могут включаться в WHERE или HAVING так (в квадратных скобках указаны необязательные элементы, через | – один из элементов):

1. WHERE | HAVING выражение оператор_сравнения (вложенный запрос);
2. WHERE | HAVING выражение, включающее вложенный запрос;
3. WHERE | HAVING выражение [NOT] IN (вложенный запрос);
4. WHERE | HAVING выражение  оператор_сравнения  ANY | ALL (вложенный запрос).

Также вложенные запросы могут вставляться в основной запрос после ключевого слова SELECT.

### Структура и наполнение таблицы
Все запросы в данном уроке будут формулироваться для таблицы book(создание, заполнение):

book_id	title	author	price	amount
INT PRIMARY KEY AUTO_INCREMENT	VARCHAR(50)	VARCHAR(30)	DECIMAL(8,2)	INT
1. Мастер и Маргарита	Булгаков М.А.	670.99	3
2. Белая гвардия	Булгаков М.А.	540.50	5
3. Идиот	Достоевский Ф.М.	460.00	10
4. Братья Карамазовы	Достоевский Ф.М.	799.01	3
5. Игрок	Достоевский Ф.М.	480.50	10
6. Стихотворения и поэмы	Есенин С.А.	650.00	15